<!DOCTYPE html>
<html lang="en-US">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="author" content="Andy Wegner" />

        <meta property="og:type" content="article" />

<meta name="keywords" content="technical, Side Activities, " />

<meta property="og:title" content="...and then there was a backup server "/>
<meta property="og:url" content="https://andrewwegner.com/new-house-server.html" />
<meta property="og:description" content="Technical discussion about the new backup server" />
<meta property="og:site_name" content="Ponderings of an Andy" />
<meta property="og:article:author" content="Andy Wegner" />
<meta property="og:article:published_time" content="2018-02-12T15:15:00-06:00" />
<meta name="twitter:title" content="...and then there was a backup server ">
<meta name="twitter:description" content="Technical discussion about the new backup server">

        <title>...and then there was a backup server  · Ponderings of an Andy
</title>
        <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css" rel="stylesheet">
        <link rel="stylesheet" type="text/css" href="https://andrewwegner.com/theme/css/pygments.css" media="screen">
        <link rel="stylesheet" type="text/css" href="https://andrewwegner.com/theme/tipuesearch/tipuesearch.css" media="screen">
        <link rel="stylesheet" type="text/css" href="https://andrewwegner.com/theme/css/elegant.css" media="screen">
        <link rel="stylesheet" type="text/css" href="https://andrewwegner.com/theme/css/custom.css" media="screen">
        <link rel="stylesheet" type="text/css" href="https://andrewwegner.com/theme/css/keys.css" media="screen">
        <link href="https://andrewwegner.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Ponderings of an Andy - Full Atom Feed" />

<script type="text/javascript">
    window.heap=window.heap||[],heap.load=function(e,t){window.heap.appid=e,window.heap.config=t=t||{};var r=t.forceSSL||"https:"===document.location.protocol,a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=(r?"https:":"http:")+"//cdn.heapanalytics.com/js/heap-"+e+".js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(a,n);for(var o=function(e){return function(){heap.push([e].concat(Array.prototype.slice.call(arguments,0)))}},p=["addEventProperties","addUserProperties","clearEventProperties","identify","resetIdentity","removeEventProperty","setEventProperties","track","unsetEventProperty"],c=0;c<p.length;c++)heap[p[c]]=o(p[c])};
      heap.load("653100411");
</script>
    </head>
    <body>
        <div id="content-sans-footer">
        <div class="navbar navbar-static-top">
            <div class="navbar-inner">
                <div class="container-fluid">
                    <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </a>
                    <a class="brand" href="https://andrewwegner.com/"><span class=site-name>Ponderings of an Andy</span></a>
                    <div class="nav-collapse collapse">
                        <ul class="nav pull-right top-menu">
                            <li ><a href="https://andrewwegner.com">Home</a></li>
                            <li ><a href="https://andrewwegner.com/categories.html">Categories</a></li>
                            <li ><a href="https://andrewwegner.com/tags.html">Tags</a></li>
                            <li ><a href="https://andrewwegner.com/archives.html">Archives</a></li>
                            <li><form class="navbar-search" action="https://andrewwegner.com/search.html" onsubmit="return validateForm(this.elements['q'].value);"> <input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input"></form></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="container-fluid">
            <div class="row-fluid">
                <div class="span1"></div>
                <div class="span10">
<article itemscope itemtype="https://schema.org/BlogPosting">
<meta itemprop="headline" content="...and then there was a backup server" />
<time itemprop="datePublished" datetime="2018-02-12T15:15:00-06:00">
<meta itemprop="publisher" content="Andy Wegner" />
<link rel="canonical" href="https://andrewwegner.com/new-house-server.html" />
<div class="row-fluid">
    <header class="page-header span10 offset2">
    <h1><a href="https://andrewwegner.com/new-house-server.html"> ...and then there was a backup server  </a></h1>
    </header>
</div>

<div class="row-fluid" id="table-of-contents">
    <div class="span2 table-of-content">
        <nav>
        <h4>Contents</h4>
        <div class="toc">
<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#server-goals">Server Goals</a></li>
<li><a href="#hardware">Hardware</a><ul>
<li><a href="#that-ram">That RAM...</a></li>
</ul>
</li>
<li><a href="#whats-next">What's next</a></li>
</ul>
</div>
        </nav>
    </div>
    <div class="span8 article-content">

            
            <div itemprop="articleBody mainEntityOfPage">
            
<h2 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link">¶</a></h2>
<p>In my <a href="https://andrewwegner.com/backup-your-data.html">last post</a>, I covered the events that lead to my data loss scare. Faulty, untested, backups will bite you every time. The question 
is just, "when will it happen?". By mid-to-late January (three months later), I'd gotten everything back from <a href="http://sertdatarecovery.com">SERT Data Recovery</a> and
was happy that everything was recovered. It was time to finally build that huge NAS.</p>
<h2 id="server-goals">Server Goals<a class="headerlink" href="#server-goals" title="Permanent link">¶</a></h2>
<p>A NAS for a home backup solution could be something as simple as a prebuilt device with a couple hard drives. I'm a bit of a geek and have a lot of digital data, not to 
mention family pictures, years worth of programs I've written, and a digital music and movie collection. I'm a digital pack rat, but a well organized digital pack rat. 
I also wanted to get more out of this server than "plug the device into the router". I ran game servers for <a href="https://andrewwegner.com/thanks-for-all-the-fish.html">Vipers</a> for five years. I did a little bit of server 
work at Caterpillar. I've toyed with server virtual machines off and on for testing various packages and software over the years. Through all of this, though, I've 
never had a server in the house that I could use to run some of my scripts on. Those always ran on my desktop because it was always on. This server was going to change that. </p>
<p>I had several goals when building this thing:</p>
<ul>
<li>Have more storage space than I needed for several years. I didn't want to rebuild this in 18 months because I was bad at planning. Years ago when I built my computer
 for college, I stuck two 120 gigabyte hard drives in the machine and thought I'd never fill that. When I came home that first summer, I already had to upgrade hard drives 
 because I was low on space. </li>
<li>Run a server version of Linux. I don't want to buy a license for a Microsoft server product and my Microsoft Academic Licenses expired a while ago. During my time with Vipers, I used a Red Hat variant of Linux. At Caterpillar we used Ubuntu. </li>
<li>Utilize <a href="https://en.wikipedia.org/wiki/ZFS">ZFS</a> for protection against data corruption. This combined with my more recent usage of Ubuntu lead me to decide on using Ubuntu Server for the operating system. 
 At the time of this post, I'll be using the 16.04 LTS version. I'll continue to upgrade to future LTS versions.</li>
<li>Back up data from all devices in the house automatically. As camera phones have gotten better, we've found that we carry our bulky digital camera less and less. The problem
 with the phone camera is that we need to get the pictures to the computer. I don't want to hunt down a data cable or email the pictures to myself. I'm also not a fan of 
 posting everything to social media. I want my phone to send the pictures to a backup location automatically.</li>
<li>Host my personal git repositories and personal projects.</li>
<li>Be able to stream music and movies to other devices on the network.</li>
</ul>
<h2 id="hardware">Hardware<a class="headerlink" href="#hardware" title="Permanent link">¶</a></h2>
<p>Now that I've decided my goals, it was time to pick out hardware. The biggest decision was to determine how much storage space I'd be getting. The idea was that hard drives
would be the majority of the cost of this machine. In the end, I went with the following hardware:</p>
<ul>
<li>Rosewell 4U server chasis. It's rack mountable for the future when I can convince myself that a server rack in the basement is a thing I want to spend money on and haul around.</li>
<li>Supermicro MBD-X11SSM-F-O Micro AT server motherboard (LGA 1151)</li>
<li>Intel Xeon E3-1230 V5 3.4 Ghz processor</li>
<li>2x Supermicro certified MEM-DR416L-SL01-EU21 16 GB DDR4-2133 ECC server memory. Take careful note of that model. I originally ordered MEM-DR416L-SL01-ER21 (notice 
 the single "R" to "U" character difference). The motherboard did not like the ER21 at all. </li>
<li>EVGA 650 power supply (I've been really happy with EVGA power supplies on my last 4 machine builds).</li>
<li>1x Western Digital Blue 1 terabyte SSD (for the operating system and other applications)</li>
<li>7x Western Digital Red 4 terabyte hard drives (for all the data)</li>
<li>Enough SATA cables for all 8 drives</li>
</ul>
<p>I'll be running ZFS in RAIDZ2 (dual parity). This means with 7 drives, two will be effectively parity drives. I'll have a total of 20 terabytes, minus formatting, for data. After formatting this comes down to a little over 16 terabytes of usable space. Considering that the rest of the household has a combined 5 terabytes, if I use up every available bit, I'm hoping that 16 will last me a while.</p>
<h3 id="that-ram">That RAM...<a class="headerlink" href="#that-ram" title="Permanent link">¶</a></h3>
<p>I went with the Supermicro board based on a recommendation from a friend. Supermicro's site is really good. It has <a href="https://www.supermicro.com/products/motherboard/Xeon/C236_C232/X11SSM-F.cfm">tested compatible hardware lists</a> and, it turns out, 
a knowledgeable person behind their online store's chat feature. The problem that I ran into when building this machine is that the compatible RAM was really hard to find. 
I didn't realize that and ordered the mother board in my first batch of components. When I finally went to look for RAM, I failed to notice a single character difference between
the EU21 version that I needed and the ER21 version that I ordered first. </p>
<p>I assembled the machine, plugged everything in, and turned on the new server. Then it beeped at me. A lot. After some troubleshooting, re-seating the RAM and <em>finally</em>
 realizing that I ordered the wrong stuff, I exchanged what I ordered with what I needed. The EU21 RAM worked perfectly. </p>
<h2 id="whats-next">What's next<a class="headerlink" href="#whats-next" title="Permanent link">¶</a></h2>
<p>The hardware is assembled. Ubuntu 16.04 Server has been installed. The next step is configuring the server to be the backup solution for the entire house and meeting my other 
goals. I'll have a few more posts in this series on how I accomplished those goals. Stay tuned!</p>
            </div>
            <hr />
            <div itemprop="author creator" itemscope itemtype="https://schema.org/Person">
                    <span class="author_blurb"><a itemprop="url" href="https://andrewwegner.com/" rel="author"><span class="author_name" itemprop="name">Andy Wegner</span></a> -
             is a father, an engineer and a computer scientist. He is interested in online
            community building, tinkering with new code and building new applications.
            He writes about his experiences with each of these.</span>

            </div>
            
            
            <hr/>
            <aside>
            <nav>
            <ul class="articles-timeline">
                <li class="previous-article">« <a href="https://andrewwegner.com/backup-your-data.html" title="Previous: Well, there goes my data...">Well, there goes my data...</a></li>
                <li class="next-article"><a href="https://andrewwegner.com/zfs-pool-on-ubuntu.html" title="Next: Setting up a ZFS pool on Ubuntu 16.04">Setting up a ZFS pool on Ubuntu 16.04</a> »</li>
            </ul>
            </nav>
            </aside>
        </div>
        <section>
        <div class="span2" style="float:right;font-size:0.9em;">
            <h4>Published</h4>
            <time itemprop="dateCreated" datetime="2018-02-12T15:15:00-06:00">Feb 12, 2018</time>
<time itemprop="dateModified" datetime="2018-02-12T15:15:00-06:00">

        <h4>Recovering from data loss</h4>
    <ul class="multi-parts-list" id="series-parts">
            <li >
            <a href="https://andrewwegner.com/backup-your-data.html" title="Well, there goes my data...">Part 1: Well, there goes my data...</a>
            </li>
            <li  class="active-part">
            Part 2: ...and then there was a backup server
            </li>
            <li >
            <a href="https://andrewwegner.com/zfs-pool-on-ubuntu.html" title="Setting up a ZFS pool on Ubuntu 16.04">Part 3: Setting up a ZFS pool on Ubuntu 16.04</a>
            </li>
            <li >
            <a href="https://andrewwegner.com/installing-nextcloud.html" title="Installing NextCloud">Part 4: Installing NextCloud</a>
            </li>
            <li >
            <a href="https://andrewwegner.com/installing-gitlab.html" title="Setting up GitLab on the new server">Part 5: Setting up GitLab on the new server</a>
            </li>
            <li >
            <a href="https://andrewwegner.com/setup-lets-encrypt.html" title="Set up Dynamic CloudFlare IP with Let's Encrypt">Part 6: Set up Dynamic CloudFlare IP with Let's Encrypt</a>
            </li>
    </ul>
            <h4>Category</h4>
            <a class="category-link" href="https://andrewwegner.com/categories.html#side-activities-ref">Side Activities</a>
            <h4>Tags</h4>
            <ul class="list-of-tags tags-in-article">
                <li><a href="https://andrewwegner.com/tags.html#technical-ref">technical
                    <span>41</span>
</a></li>
            </ul>
<h4>Contact</h4>
    <a href="https://stackoverflow.com/users/189134/andy" title="My Stack Overflow Profile" class="sidebar-social-links" target="_blank">
    <i class="fa fa-stack-overflow sidebar-social-links"></i></a>
    <a href="http://steamcommunity.com/id/InsaneMosquito/" title="My Steam Profile" class="sidebar-social-links" target="_blank">
    <i class="fa fa-steam-square sidebar-social-links"></i></a>
    <a href="https://www.linkedin.com/in/andrew-wegner/" title="My LinkedIn Profile" class="sidebar-social-links" target="_blank">
    <i class="fa fa-linkedin sidebar-social-links"></i></a>
        </div>
        </section>
</div>
</article>
                </div>
                <div class="span1"></div>
            </div>
        </div>
        <div id="push"></div>
    </div>
<footer>
<div id="footer">
    <ul class="footer-content">
    </ul>
</div>
</footer>            <script src="//code.jquery.com/jquery.min.js"></script>
        <script src="https://use.fontawesome.com/e4a49a2d36.js"></script>
        <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
        <script>
            function validateForm(query)
            {
                return (query.length > 0);
            }
        </script>

    
    </body>
    <!-- Theme: Elegant built for Pelican
    License : http://oncrashreboot.com/pelican-elegant -->
</html>